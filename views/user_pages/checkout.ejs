<!DOCTYPE html>
<html lang="en">

<head>
	<title>
		<%= title %>
	</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="icon" type="image/png" href="images/icons/favicon.png" />
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
	<link rel="stylesheet" type="text/css" href="fonts/linearicons-v1.0.0/icon-font.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
	<link rel="stylesheet" type="text/css" href="vendor/slick/slick.css">
	<link rel="stylesheet" type="text/css" href="vendor/MagnificPopup/magnific-popup.css">
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<!-- Include SweetAlert library -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
	<!-- Include jQuery library -->
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<!-- Other necessary head elements (CSS, etc.) go here -->
</head>
<style>
	/* Modal Styles */
	.modal {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.5);
	}

	.modal-content {
		background-color: #fff;
		padding: 20px;
		max-width: 400px;
		margin: 10% auto;
		border-radius: 8px;
		position: relative;
	}

	.close {
		position: absolute;
		top: 10px;
		right: 10px;
		font-size: 20px;
		cursor: pointer;
	}

	.modal-title {
		font-size: 1.5em;
		margin-bottom: 10px;
	}

	.modal-text {
		margin-bottom: 20px;
	}

	.btn {
		display: inline-block;
		padding: 10px 20px;
		text-decoration: none;
		border-radius: 4px;
		cursor: pointer;
	}

	.btn-delete {
		background-color: #e74c3c;
		color: #fff;
	}

	.btn-cancel {
		background-color: #3498db;
		color: #fff;
		margin-left: 10px;
	}

	/* Hover effect for buttons */
	.btn:hover,
	.btn-delete:hover,
	.btn-cancel:hover {
		opacity: 0.8;
	}

	.payment-method {
		display: flex;
		align-items: center;
		background-color: #fff;
		border: 1px solid #ddd;
		border-radius: 8px;
		padding: 10px;
		margin-bottom: 10px;
		margin-right: 10px;
		transition: background-color 0.3s ease;
		cursor: pointer;
	}

	.sss {
		font-size: medium;
		font-family: sans-serif;
	}

	.payment-method:hover {
		background-color: #f5f5f5;
	}

	.payment-input {
		margin-right: 15px;
	}

	.payment-label {

		align-items: center;
	}

	.unavailable-text {
		color: #d32f2f;
		font-style: oblique;
	}

	.address-list {
		display: flex;
		flex-direction: column;
	}

	.address-item {
		border: 1px solid #ddd;
		margin-bottom: 10px;
		padding: 15px;
		position: relative;
		border-radius: 8px;
		cursor: pointer;
		transition: background-color 0.3s ease;
	}

	.address-item:hover {
		background-color: #f5f5f5;
	}

	.address-item label {
		display: flex;
		align-items: center;
	}

	.address-item input[type="radio"] {
		margin-right: 10px;
	}

	.address-item p {
		font-size: 18px;
		margin: 0;
		font-family: 'Verdana', sans-serif;
		/* Change the font-family to your preferred font */

	}

	.address-item .address-details {
		color: #555;
	}

	/* Styling for the hello modal */
	.hello {
		display: none;
		position: fixed;
		z-index: 1;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		overflow: auto;
		background-color: rgba(0, 0, 0, 0.5);
	}

	.hello-content {
		background-color: #fefefe;
		margin: 15% auto;
		padding: 20px;
		border: 1px solid #888;
		width: 80%;
		max-width: 400px;
		box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
		border-radius: 8px;
		position: relative;
		z-index: 2;
		/* Ensure modal content is above the overlay */
	}

	.ppp {
		margin: 10px 0;
	}

	.aaa {
		display: block;
		padding: 10px;
		margin-top: 10px;
		text-align: center;
		background-color: #4caf50;
		color: white;
		text-decoration: none;
		border-radius: 5px;
	}

	.aaa:hover {
		background-color: #45a049;
	}

	.bbb {
		display: block;
		padding: 10px;
		margin-top: 10px;
		text-align: center;
		background-color: #f44336;
		/* Red color for "Go Back" button */
		color: white;
		text-decoration: none;
		border-radius: 5px;
	}

	.bbb:hover {
		background-color: #d32f2f;
	}

	.body-disabled {
		overflow: hidden;
	}
</style>

<script>
	function openModal() {
		document.getElementById("loginModal").style.display = "block";
		document.body.classList.add("body-disabled");
	}

	function closeModal() {
		document.getElementById("loginModal").style.display = "none";
		document.body.classList.remove("body-disabled");
	}

	window.onload = openModal;

	function goBack() {
		window.history.back();
	}
	function openConfirmationModal() {
		document.getElementById('confirmationModal').style.display = 'block';
	}

	function closeConfirmationModal() {
		document.getElementById('confirmationModal').style.display = 'none';
	}

</script>

<% if (loginRequired) { %>
	<div id="loginModal" class="hello">
		<div class="hello-content">
			<p class="ppp">
				<%= loginMessage %>
			</p>
			<a class="aaa" href="/login">Login</a>
			<a class="aaa" href="/register">Sign Up</a>
			<a class="bbb" href="javascript:void(0);" onclick="goBack()">Go Back</a>
		</div>
	</div>
	<% } %>





		<!-- Header -->
		<header class="header-v3">
			<!-- Header desktop -->
			<div class="container-menu-desktop trans-03">
				<div class="wrap-menu-desktop">
					<nav class="limiter-menu-desktop p-l-45">

						<!-- Logo desktop -->
						<a href="/home" class="logo">
							<span id="logo">TRENDS</span>
						</a>

						<!-- Menu desktop -->
						<div class="menu-desktop">
							<ul class="main-menu">
								<li>
									<a href="/home">Home</a>
								</li>

								<li class="label1" data-label1="hot">
									<a href="/products">Shop</a>
								</li>

								<li>
									<a href="/cart">Cart</a>
								</li>

								<li>
									<a href="/about">About</a>
								</li>

								<li>
									<a href="/contact">Contact</a>
								</li>


							</ul>
						</div>

						<!-- The rest of your cart page content goes here -->

						<!-- Icon header -->
						<!-- Icon header -->
						<div class="wrap-icon-header flex-w flex-r-m h-full">
							<div class="wrap-icon-header flex-w flex-r-m">
								<!-- Login icon -->
								<% if (valid===undefined) { %>
									<a href="/login"
										class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-login"
										data-toggle="tooltip" title="Login">
										<i class="zmdi zmdi-alert-circle"></i>
									</a>
									<% } %>

										<div id="aaaa">
											<a href="/cart"
												class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti "
												data-notify="<%= (cartItems !== null && typeof cartItems !== 'undefined') ? cartItems : 0 %>">
												<i class="zmdi zmdi-shopping-cart"></i>
											</a>

										</div>


										<% if (valid) { %>
											<a href="whishlist"
												class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
												data-notify="<%= whishItems %>">
												<i class="zmdi zmdi-favorite-outline"></i>
											</a>&nbsp;&nbsp;&nbsp;
											<% }else{ %>
												<a href="/login"
													class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
													data-notify="0">
													<i class="zmdi zmdi-favorite-outline"></i>
												</a>&nbsp;&nbsp;&nbsp;
												<% } %>

													<% if (valid) { %>
														<a href="/account"
															class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
															data-notify="<%= messages %>">
															<i class="zmdi zmdi-account"></i>
														</a>
														<% } %>
							</div>
							<% if (valid) { %>
								<div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-logout"
									data-toggle="modal" data-target="#logoutModal">
									<i class="zmdi zmdi-power-off"></i>
								</div>
								<% } %>
						</div>


						<!-- Logout Modal -->
						<div class="modal fade" id="logoutModal" tabindex="-1" role="dialog"
							aria-labelledby="logoutModalLabel" aria-hidden="true">
							<div class="modal-dialog" role="document">
								<div class="modal-content">
									<div class="modal-header">
										<h5 class="modal-title" id="logoutModalLabel">Logout Confirmation
										</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<div class="modal-body">
										Are you sure you want to logout?
									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-secondary"
											data-dismiss="modal">Cancel</button>
										<a href="/logout" class="btn btn-primary">Yes,I do!</a>
									</div>
								</div>
							</div>
						</div>

				</div>
				</nav>
			</div>
			</div>

			<!-- Header Mobile -->
			<div class="wrap-header-mobile">
				<!-- Logo moblie -->
				<div class="logo-mobile">
					<span id="logo1">TRENDS</span>
				</div>
				<% if (valid===undefined) { %>
					<a href="/login" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 js-show-login"
						data-toggle="tooltip" title="Login">
						<i class="zmdi zmdi-alert-circle"></i>
					</a>&nbsp;&nbsp;
					<% } %>

						<div class="wrap-icon-header flex-w flex-r-m m-r-15">



							<div id="aaaa">
								<a href="/cart"
									class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti "
									data-notify="<%= (cartItems !== null && typeof cartItems !== 'undefined') ? cartItems : 0 %>">
									<i class="zmdi zmdi-shopping-cart"></i>
								</a>
							</div>

							<% if (valid) { %>
								<a href="whishlist"
									class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
									data-notify="<%= whishItems %>">
									<i class="zmdi zmdi-favorite-outline"></i>
								</a>&nbsp;&nbsp;&nbsp;
								<% }else{ %>
									<a href="/login"
										class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
										data-notify="0">
										<i class="zmdi zmdi-favorite-outline"></i>
									</a>&nbsp;&nbsp;&nbsp;
									<% } %>

										<% if (valid) { %>
											<a href="/account"
												class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti"
												data-notify="<%= messages %>">
												<i class="zmdi zmdi-account"></i>
											</a>
											<% } %>
						</div>

						<!-- Button show menu -->
						<div class="btn-show-menu-mobile hamburger hamburger--squeeze">
							<span class="hamburger-box">
								<span class="hamburger-inner"></span>
							</span>
						</div>
			</div>


			<!-- Menu Mobile -->
			<div class="menu-mobile">
				<ul class="main-menu-m">
					<li>
						<a href="/home">Home</a>
						<span class="arrow-main-menu-m">
							<i class="fa fa-angle-right" aria-hidden="true"></i>
						</span>
					</li>

					<li>
						<a href="/products" class="label1 rs1" data-label1="hot">Shop</a>
					</li>

					<li>
						<a href="/cart">Cart</a>
					</li>

					<li>
						<a href="/about">About</a>
					</li>

					<li>
						<a href="/contact">Contact</a>
					</li>
					<li>
						<a href="/logout">Logout</a>
					</li>
				</ul>
			</div>


		</header>



		<!-- Title page -->
		<section class="bg-img1 txt-center p-lr-15 p-tb-92"
			style="background-image: url('https://in.worldline.com/uploadfile/blogs/desktop_img/A-Comprehensive_list_desk_banner.jpg');">
			<h2 class="ltext-105 cl0 txt-center">
				Checkout
			</h2>
		</section>

		<div class="container">
			<div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
				<a href="/cart" class="stext-109 cl8 hov-cl1 trans-04">
					Cart
					<i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
				</a>
				<span class="stext-109 cl4">
					Checkout
				</span>
			</div>
		</div>

		<form class="bg0 p-t-75 p-b-85" id="placeOrder">
			<div class="container">
				<div class="row">
					<div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
						<!-- Customer Information -->
						<div class="m-l-25 m-r--38 m-lr-0-xl">
							<h4 class="mtext-109 cl2 p-b-30">
								Shipping Address
							</h4>
							<button
								class="flipkart-add-address bg1 bor1 flipkart-btn-add-address stext-101 cl0 size-103  p-lr-15"
								style="font-size: 18px; background-color: #4e4e4e; color: white;" type="button"
								data-toggle="modal" data-target="#addAddressModal2">
								Add New Address
							</button>

							<br><br>

							<div class=" m-b-20 how-pos4-parent address-list">
								<% user.address.forEach(function (address) { %>
									<div class="address-item">
										<input type="radio" id="address<%= address._id %>" name="address"
											value="<%= address._id %>" required>
										<label for="address<%= address._id %>">
											<p class="stext-111 cl2 size-116">
												<%= address.streetAdress %>, <%= address.city %> - <%= address.state %>
															road, <%= address.city %> - <%= address.pincode %>
											</p>
											<p class="stext-111 cl2 size-116 address-details">
												Mobile: <%= address.mobile %>, Email: <%= address.email %>
											</p>
										</label>
									</div>
									<% }) %>
							</div>

							<!-- Payment Details -->
							<h4 class="mtext-109 cl2 p-b-30">
								Payment Options
							</h4>

							<% if (totalPrice<=1000) { %>
								<div class="bor8 m-b-20 how-pos4-parent payment-method">
									<input type="radio" id="cod" name="payment_method" value="cod" class="payment-input"
										required>
									<label for="cod" class="payment-label">
										<span class="stext-111 cl2 size-116 sss">Cash on Delivery</span>
									</label>
								</div>

								<% }else{ %>
									<div class="bor8 m-b-20 how-pos4-parent payment-method">
										<label for="cod" class="payment-label">
											<span class="stext-111 cl2 size-116 sss">Cash on Delivery</span>
										</label>
										<span style="color: #d32f2f;">&nbsp;&nbsp;&nbsp;&nbsp; is not available for
											order Above 1000</span>
									</div>
									<% } %>

										<div class="bor8 m-b-20 how-pos4-parent payment-method">
											<input type="radio" id="online_payment" name="payment_method"
												value="online_payment" class="payment-input">
											<label for="online_payment" class="payment-label">
												<span class="stext-111 cl2 size-116 sss">Online Payment</span>
											</label>
										</div>

										<% if (!wallet.msg) { %>
											<div class="bor8 m-b-20 how-pos4-parent payment-method">
												<input type="radio" id="wallet" name="payment_method" value="wallet"
													class="payment-input" <%=wallet.balance>=totalPrice?"":'disabled'
												%>>
												<label for="online_payment" class="payment-label">
													<span class="stext-111 cl2 size-116 sss">Wallet</span>
												</label>
											</div>
											<% } %>

						</div>
					</div>

					<!-- Order Summary -->
					<div id="totals" class="col-sm-10 col-lg-7 col-xl-5 m-lr-auto m-b-50">
						<div class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm">
							<h4 class="mtext-109 cl2 p-b-30">
								Cart Totals
							</h4>

							<div class="flex-w flex-t p-b-13">
								<div class="size-208">
									<strong class="stext-110 cl2">
										Price (<%= products.length %>)
									</strong>
								</div>

								<div class="size-209">
									<span class="mtext-110 cl2">
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%= subtotal %>
									</span>
								</div>
							</div>

							<div class="flex-w flex-t p-t-15 p-b-30">
								<div class="size-208 w-full-ssm">
									<strong class="stext-110 cl2">
										Offer Amount
									</strong>
								</div>

								<div class="size-209 p-r-18 p-r-0-sm w-full-ssm">
									<span class="mtext-110 cl2" style="color: #0aa02b;">
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%= Math.round(totalDiscount - subtotal ||
											0) %>
									</span>
								</div>
							</div>

							<div class="flex-w flex-t p-t-15 p-b-30">
								<div class="size-208 w-full-ssm">
									<strong class="stext-110 cl2">
										Coupon Discount
									</strong>
								</div>

								<div class="size-209 p-r-18 p-r-0-sm w-full-ssm">
									<span class="mtext-110 cl2" style="color: #0aa02b;">
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%= Math.round(couponDiscount || 0) %>%
									</span>
								</div>
							</div>

							<div class="flex-w flex-t bor12 p-b-13">
								<div class="size-208">
									<strong class="stext-110 cl2">
										Shipping
									</strong>
								</div>

								<div class="size-209">
									<span class="mtext-110 cl2" style="color: #0aa02b;">
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Free Shipping
									</span>
								</div>
							</div>

							<div class="flex-w flex-t p-t-27 p-b-33">
								<div class="size-208">
									<span class="mtext-101 cl2">
										Total Amount
									</span>
								</div>

								<div class="size-209 p-t-1">
									<strong class="mtext-110 cl2">
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%=Math.round(totalPrice) %>
									</strong>
								</div>
							</div>
							<input type="hidden" name="products" value="<%= JSON.stringify(products) %>">
							<input type="hidden" name="totalprice" value="<%= Math.round(totalPrice) %>">


							<button id="place-order-success"
								class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 js-addwish-b2">
								Place Order
							</button>
						</div>
					</div>
				</div>
			</div>
		</form>


		<div class="modal fade" id="addAddressModal2" style="margin-top: 70px;" tabindex="-1" role="dialog"
			aria-labelledby="addAddressModalLabel2" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="addAddressModalLabel2">Add New Address</h5>
					</div>
					<div class="modal-body">
						<form id="newAddressForm2" action="" method="post">
							<!-- First Name and Last Name -->
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label for="newFirstName">First Name:</label>
										<input type="text" class="form-control" id="2newFirstName" name="Fname">
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label for="newLastName">Last Name:</label>
										<input type="text" class="form-control" id="2newLastName" name="Lname">
									</div>
								</div>
							</div>

							<!-- Company Name -->
							<div class="form-group">
								<label for="newCompanyName">Company Name:</label>
								<input type="text" class="form-control" id="2newCompanyName" name="companyName">
							</div>

							<!-- Country -->
							<div class="form-group">
								<label for="newCountry">Country:</label>
								<input type="text" class="form-control" id="2newCountry" name="country" minlength="4">
							</div>

							<!-- Street Address -->
							<div class="form-group">
								<label for="newStreetAddress">Street Address:</label>
								<input type="text" class="form-control" id="2newStreetAddress" name="streetAdress"
									minlength="7" required>
							</div>

							<!-- City, State, and Pincode -->
							<div class="row">
								<div class="col-md-4">
									<div class="form-group">
										<label for="newCity">City:</label>
										<input type="text" class="form-control" id="2newCity" name="city">
									</div>
								</div>
								<div class="col-md-4">
									<div class="form-group">
										<label for="newState">State:</label>
										<input type="text" class="form-control" id="2newState" name="state">
									</div>
								</div>
								<div class="col-md-4">
									<div class="form-group">
										<label for="newPincode">Pincode:</label>
										<input type="number" class="form-control" id="2newPincode" name="pincode"
											minlength="4">
									</div>
								</div>
							</div>

							<!-- Mobile and Email -->
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label for="newMobile">Mobile:</label>
										<input type="number" class="form-control" id="2newMobile" name="mobile"
											minlength="10">
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label for="newEmail">Email:</label>
										<input type="email" class="form-control" id="2newEmail" name="email">
									</div>
								</div>
							</div>

							<div class="error-container alert alert-danger mt-3" style="display: none;">
							</div>

							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								<button class="btn btn-primary" onclick="addnewAddress(event)">Save Address</button>
							</div>

						</form>
						<script>
							document.addEventListener("DOMContentLoaded", function () {
								const form = document.getElementById("newAddressForm2");
								const currentUrl = window.location.href;

								form.action = "/add-address?ad=" + encodeURIComponent(currentUrl);
							});
							function addnewAddress(event) {

								event.preventDefault();

								clearErrorMessages();

								const fields = ["2newFirstName", "2newLastName", "2newCompanyName", "2newCountry", "2newStreetAddress", "2newCity", "2newState", "2newPincode", "2newMobile", "2newEmail"];
								const errors = [];

								for (const field of fields) {
									const value = document.getElementById(field).value.trim();

									if (!isValidInput(value)) {
										errors.push(`Please enter a valid ${field.replace("2new", "").toLowerCase()}.`);
									}
								}

								const email = document.getElementById("2newEmail").value.trim();
								if (!isValidEmail(email)) {
									errors.push("Please enter a valid email address.");
								}

								if (errors.length > 0) {
									displayError(errors[0]); // Display the first error
								} else {
									// If no errors, submit the form
									document.getElementById("newAddressForm2").submit();
								}
							}
						</script>

					</div>
				</div>
			</div>
		</div>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
		<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


		<script>
			$("#placeOrder").submit((e) => {
				e.preventDefault();
				$.ajax({
					url: "/place-order",
					method: "POST",
					data: $('#placeOrder').serialize(),
					success: function (res) {

						if (res.status == 200) {
							window.location.href = '/order-success?id=' + res.id
						}
						else if (res.success) {
							var options = {
								"key": "" + res.key_id + "",
								"amount": res.amount,
								"currency": "INR",
								"name": "Trends Payment",
								"description": "Payment for online Purchase",
								"image": "https://wallpapercave.com/wp/wp5390765.jpg",
								"order_id": "" + res.order_id + "",
								"handler": function (response) {
									$.ajax({
										url: '/online-payment',
										method: "POST",
										data: {
											order: res,
											payment: response,
										},
										success: (ress) => {
											if (ress.fail) {
												Swal.fire({
													icon: "error",
													title: "Oops...",
													text: "Payment failed!",
													footer: '<button>try again</button>'
												});
											} else {
												window.location.href = '/order-success?id=' + ress.orderid
											}

										}
									})
								},
								"prefill": {
									"contact": "" + res.contact + "",
									"name": "" + res.name + "",
									"email": "" + res.email + ""
								},
								"notes": {
									"description": "" + res.description + ""
								},
								"theme": {
									"color": "#169dd2"
								}
							};
							var razorpayObject = new Razorpay(options);
							razorpayObject.on('payment.failed', function (response) {
								Swal.fire({
									icon: "error",
									title: "Oops...",
									text: "Payment failed!",
									footer: '<button>try again</button>'
								});
							});
							razorpayObject.open();
						}
						else if (res.outOfStock) {
							
							if (res.outOfStock.length > 0) {
								let alertMessage = "The following products have low stock:\n";

								for (const problem of res.outOfStock) {
									alertMessage += `${problem.name} is only ${problem.remainingQuantity} left.\n`;
								}

								new Swal("Warning!", alertMessage, "warning");
							}
						}
					}
				})
			})
		</script>





		</div>
		<br><br><br>
		<!-- Footer -->
		<footer class="bg3 p-t-75 p-b-32">
			<div class="container">
				<div class="row">
					<div class="col-sm-6 col-lg-3 p-b-50">
						<h4 class="stext-301 cl0 p-b-30">
							Categories
						</h4>

						<ul>
							<li class="p-b-10">
								<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
									Women
								</a>
							</li>

							<li class="p-b-10">
								<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
									Men
								</a>
							</li>

							<li class="p-b-10">
								<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
									Shoes
								</a>
							</li>

							<li class="p-b-10">
								<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
									Watches
								</a>
							</li>
						</ul>
					</div>

					<div class="col-sm-6 col-lg-3 p-b-50">
						<h4 class="stext-301 cl0 p-b-30">
							Help
						</h4>

						<ul>
							<li class="p-b-10">
								<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
									Track Order
								</a>
							</li>

							<li class="p-b-10">
								<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
									Returns
								</a>
							</li>

							<li class="p-b-10">
								<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
									Shipping
								</a>
							</li>

							<li class="p-b-10">
								<a href="#" class="stext-107 cl7 hov-cl1 trans-04">
									FAQs
								</a>
							</li>
						</ul>
					</div>

					<div class="col-sm-6 col-lg-3 p-b-50">
						<h4 class="stext-301 cl0 p-b-30">
							GET IN TOUCH
						</h4>

						<p class="stext-107 cl7 size-201">
							Any questions? Let us know in store at 8th floor, 379 Hudson St, New York, NY
							10018 or
							call us
							on (+1) 96 716 6879
						</p>

						<div class="p-t-27">
							<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
								<i class="fa fa-facebook"></i>
							</a>

							<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
								<i class="fa fa-instagram"></i>
							</a>

							<a href="#" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
								<i class="fa fa-pinterest-p"></i>
							</a>
						</div>
					</div>

					<div class="col-sm-6 col-lg-3 p-b-50">
						<h4 class="stext-301 cl0 p-b-30">
							Newsletter
						</h4>

						<form>
							<div class="wrap-input1 w-full p-b-4">
								<input class="input1 bg-none plh1 stext-107 cl7" type="text" name="email"
									placeholder="example@gmail.com">
								<div class="focus-input1 trans-04"></div>
							</div>

							<div class="p-t-18">
								<button class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04">
									Subscribe
								</button>
							</div>
						</form>
					</div>
				</div>

				<div class="p-t-40">
					<div class="flex-c-m flex-w p-b-18">
						<a href="#" class="m-all-1">
							<img src="images/icons/icon-pay-01.png" alt="ICON-PAY">
						</a>

						<a href="#" class="m-all-1">
							<img src="images/icons/icon-pay-02.png" alt="ICON-PAY">
						</a>

						<a href="#" class="m-all-1">
							<img src="images/icons/icon-pay-03.png" alt="ICON-PAY">
						</a>

						<a href="#" class="m-all-1">
							<img src="images/icons/icon-pay-04.png" alt="ICON-PAY">
						</a>

						<a href="#" class="m-all-1">
							<img src="images/icons/icon-pay-05.png" alt="ICON-PAY">
						</a>
					</div>

					<p class="stext-107 cl6 txt-center">
						<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
						Copyright &copy;
						<script>document.write(new Date().getFullYear());</script> All rights reserved |
						Made with
						<i class="fa fa-heart-o" aria-hidden="true"></i> by <a href="https://colorlib.com"
							target="_blank">Colorlib</a> &amp; distributed by <a href="https://themewagon.com"
							target="_blank">ThemeWagon</a>
						<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->

					</p>
				</div>
			</div>
		</footer>


		<!-- Back to top -->
		<div class="btn-back-to-top" id="myBtn">
			<span class="symbol-btn-back-to-top">
				<i class="zmdi zmdi-chevron-up"></i>
			</span>
		</div>
		<style>
			.aaa {
				color: #169dd2;
			}
		</style>

		<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
		<!--==============================================================================================-->
		<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
		<!--===============================================================================================-->
		<script src="vendor/animsition/js/animsition.min.js"></script>
		<!--===============================================================================================-->
		<script src="vendor/bootstrap/js/popper.js"></script>
		<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
		<!--===============================================================================================-->
		<script src="vendor/select2/select2.min.js"></script>
		<script>
			$(".js-select2").each(function () {
				$(this).select2({
					minimumResultsForSearch: 20,
					dropdownParent: $(this).next('.dropDownSelect2')
				});
			})
		</script>
		<!--===============================================================================================-->
		<script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
		<!--===============================================================================================-->
		<script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
		<script>
			$('.js-pscroll').each(function () {
				$(this).css('position', 'relative');
				$(this).css('overflow', 'hidden');
				var ps = new PerfectScrollbar(this, {
					wheelSpeed: 1,
					scrollingThreshold: 1000,
					wheelPropagation: false,
				});

				$(window).on('resize', function () {
					ps.update();
				})
			});
		</script>
		<!--===============================================================================================-->
		<script src="js/main.js"></script>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


		</body>

</html>